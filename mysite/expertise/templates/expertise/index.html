{% extends "expertise/base.html" %}

{% block head_js %}
{% load static %}
<script defer src="{% static 'expertise/index.js' %}"></script>
{% endblock %}

{% block title %}Expertise overview{% endblock %}

{% block content %}
<div class="d-flex justify-content-center">
    <form class="home">
        <div class="mb-3">
            <!-- maybe give instructions for difference between filter and search -->
            <h3>
                <label for="search-filter" class="form-label">Search and filter</label>
            </h3>
            <select class="form-select search-filter" multiple="multiple" name="filters[]" autofocus>
                {% for key, item in suggestions.items %}
                <optgroup class="{{ item.class }}" label="{{ item.group }}">
                    {% comment %}
                        the pk is prefixed so select2 can distinguish between
                        e.g. offered and wanted expertise which can be the same node
                        in the database
                    {% endcomment %}
                    {% for suggestion in item.options %}
                    <option class="{{ item.class }}" value="{{ key|slice:":4" }}-{{ suggestion.pk }}">{{ suggestion.name }}</option>
                    {% endfor %}
                </optgroup>
                {% endfor %}
            </select>
        </div>
        <button type="submit" id="search-button" class="btn btn-primary">Search</button>
        <div class="mt-3">
            <div class="alert search-alert py-2 d-none" role="alert">
                alert text placeholder that you shouldn't see :&#41
            </div>
        </div>
    </form>
</div>

<div class="table-responsive d-none persons-table-container">
    <table class="persons-table table table-hover table-sm">
        {# table-primary for head color because borders don't work with sticky #}
        <thead>
            <tr>
                <th scope="col" class="person">Name</th>
                <th scope="col">Email</th>
                <th scope="col" class="interest">Research interest</th>
                <th scope="col" class="institute">Institute</th>
                <th scope="col" class="faculty">Faculty</th>
                <th scope="col" class="department">Department</th>
                <th scope="col" class="person">Advisor</th>
                <th scope="col" class="role">Role in ScaDS.AI</th>
                <th scope="col" class="expertise">Offered expertise</th>
                <th scope="col" class="expertise">Wanted expertise</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<div class="modal fade" id="graphModal" tabindex="-1" aria-labelledby="graphModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="graphModalLabel">Network graph</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body d-flex flex-wrap justify-content-center">
                <div class="spinner-border text-primary graph-spinner" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <div id="graph-container" class=""></div>
            </div>
        </div>
    </div>
</div>

{% endblock %}